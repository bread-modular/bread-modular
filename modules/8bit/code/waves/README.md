# 8-bit Waves

A digital sawtooth wave generator module with CV and MIDI control capabilities. This module generates an 8-bit sawtooth wave with an additional octave-down sawtooth wave for rich timbral possibilities.

## Overview

This module creates digital sawtooth waves for synthesizers. It has two oscillators - a main one and a second one that plays one octave lower. You can control it using either CV inputs or MIDI notes by toggling a switch.

The sound has that classic 8-bit character, perfect for chiptune and retro synth sounds. The module is designed to be simple to use while offering flexible sound shaping options.

## Features

- **Dual Sawtooth Oscillators**: Main oscillator and octave-down oscillator
- **Switchable Control Mode**: Choose between CV or MIDI control for frequency
- **CV Inputs**: 
  - CV1 for frequency control
  - CV2 for octave-down volume control
- **MIDI Input**: Full MIDI note control with gate output
- **LED Indicator**: Visual feedback of the current control mode
- **Gate Output**: Triggered by MIDI note-on events
- **Frequency Range**: 20Hz to 500Hz fundamental frequency
- **8-bit Resolution**: Classic digital sound character

## Controls

### Mode Button (TOGGLE_PIN)

The mode button toggles between two control modes:
- **CV Control Mode** (LED ON): In this mode, the frequency is controlled by the CV1 input
- **MIDI Control Mode** (LED OFF): In this mode, the frequency is controlled by incoming MIDI note messages

Press the button to switch between modes. The LED will indicate the current mode.

### CV Inputs

#### CV1 (Frequency)

- **Function**: Controls the frequency of the main sawtooth oscillator
- **Range**: 0-1023 (analog input) maps to 20Hz-500Hz
- **Active**: Only when in CV Control Mode (LED ON)
- **Behavior**: Changes to CV1 beyond a threshold of 5 units will update the frequency

#### CV2 (Octave-Down Volume)

- **Function**: Controls the volume/mix level of the octave-down sawtooth oscillator
- **Range**: 0-1023 (analog input) maps to 0-255 (volume level)
- **Active**: Always active regardless of control mode
- **Behavior**: Changes to CV2 beyond a threshold of 5 units will update the volume

### MIDI Control

The module responds to MIDI input when in MIDI Control Mode (LED OFF):

- **Note On**: 
  - Sets the oscillator frequency based on the MIDI note number
  - Activates the gate output (HIGH)
  - The frequency is calculated using the standard MIDI note to frequency conversion
  
- **Note Off**:
  - Deactivates the gate output (LOW)
  - Does not change the frequency (allows for legato playing)

- **Control Change**:
  - Currently not implemented, but the framework is in place for future expansion

## Technical Details

- **Microcontroller**: AVR-based Arduino compatible board
- **Timer Frequency**: 10MHz (20MHz clock with divider of 2)
- **DAC Resolution**: 8-bit (0-255)
- **Sawtooth Generation**: Timer-based interrupt-driven approach
- **Frequency Range**: 20Hz to 500Hz fundamental
- **Octave Division**: Main frequency divided by 2 for octave-down oscillator

## Signal Path

1. The main sawtooth wave is generated by TCB0 timer interrupts
2. The octave-down sawtooth wave is generated by TCB1 timer interrupts
3. The octave-down wave is volume-adjusted based on CV2 input
4. Both waves are mixed together with equal weighting
5. The combined signal is output through the 8-bit DAC

## Future Enhancements

- Additional waveform options
- MIDI Control Change support for parameters
- Multiple octave options for the secondary oscillator
- Expanded frequency range 